# Задания

## Задание 1.1: Установка Arduino IDE и ее настройка для работы с ESP8266

Установка Arduino IDE: https://www.arduino.cc\
Настройка Arduino IDE для работы с ESP8266 и ESP32: https://dzen.ru/a/YBThkBI8yHZ8SRcx

## Задание 1.2: Управление светодиодом по Wi-Fi

Подробности тут: https://iotdesignpro.com/projects/esp8266-based-webserver-to-control-led-from-webpage

## Задание 2.1

Суть задания состоит в разработке устройства, одновременно являющегося как HTTP-сервером, так и HTTP-клиентом.\
Данное устройство, аналогично примеру из занятия 1, должно осуществлять управление состоянием светодиода в соответствии с поступающими GET-запросами. Также, устройство должно осуществлять отправку аналогичных запросов по указанному адресу при изменении состояния встроенной в NodeMCU кнопку.

Последовательность действий:
- Взять за основу пример из прошлого занятия;
- Добавить отправку команд включения и выключения LED на другом устройстве;
- Объединиться с соседом с целью тестирования.

Ссылки по теме:
- https://iotdesignpro.com/projects/esp8266-based-webserver-to-control-led-from-webpage\
- https://randomnerdtutorials.com/esp8266-nodemcu-http-get-post-arduino/

## Задание 2.2

Установите одну из утилит, позволяющих отправлять HTTP-запросы (cURL, Postman, любую другую).\
Выполните включение и выключение светодиода на NodeMCU при помощи установленной утилиты.

## Задание 3

Разработать сервер домашней метеостанции на базе ESP8266 (NodeMCU v3) и комбинированного датчика температуры и влажности DHT11. Серверное приложение должно полностью соответствовать принципам REST. Ообмен данныме между сервером и клиентом осуществляется в формате JSON.

Последовательность действий:
- Взять за основу пример из первого занятия, либо любой другой пример HTTP-сервера;
- Добавить чтение данных с комбинированного датчика температуры и влажности;
- Осуществить тестирование разработанного сервара посредством cURL или Postman.

Ссылки по теме:
- https://iotdesignpro.com/projects/esp8266-based-webserver-to-control-led-from-webpage
- https://randomnerdtutorials.com/esp8266-nodemcu-http-get-post-arduino/
- https://arduino-tex.ru/news/59/dht11-podklyuchenie-k-esp8266.html
- https://randomnerdtutorials.com/esp8266-dht11dht22-temperature-and-humidity-web-server-with-arduino-ide
- https://arduinojson.org/

## Задание 4

Целью данной работы является моделирование светофорного оборудования регулируемого перекрестка автомобильных дорог.\
Студентам предлагается разработать встраиваемое программное обеспечение для ведущего и ведомых светофоров.\
Взаимодействие между светофорами следует осуществлять в рамках протокола HTTP.\
В качестве формата обмена данными предлагается использовать формат JSON.\
Для простоты настройки, следует осуществить моделирование светофорного оборудования X-образного перекрестка.\
Следует учесть, что оборудование перекрестка может работать, как минимум, в двух режимах.\
Также, с целью упрощения реализации, предлагается использовать схему переключения сигналов светофоров, представленную в файле "states.pdf".

Ссылки по теме:
- [states.pdf](https://drive.google.com/file/d/1fPrFdR21GMacIzvXn_A7khd1kNNR_xXU/view)
- https://iotdesignpro.com/projects/esp8266-based-webserver-to-control-led-from-webpage
- https://randomnerdtutorials.com/esp8266-nodemcu-http-get-post-arduino/
- https://arduinojson.org/

## Задание 5

Целью данной работы является знакомство с протоколом MQTT на уровне пользователя.\
Вам предлагается выполнить следующий ряд заданий:

1. Работа с локальным MQTT-сервером (брокером) на примере Mosquitto посредством встроенных консольных утилит:
- Установить MQTT-сервер (брокер) Mosquitto.
- Подписаться на выбранный Вами топик на данном сервере посредством консольной утилиты "mosquitto_sub".
- Отправить сообщение в ранее выбранный Вами топик посредством консольной утилиты "mosquitto_pub".
- Отследить его получение в "mosquitto_sub".

2. Работа с общедоступным MQTT-сервером (брокером) на примере "mqtt.by" (Press F) посредством консольных утилит Mosquitto:
- Зарегистрироваться на сервере "mqtt.by".
- Подписаться на выбранный Вами топик на сервере "mqtt.by" посредством консольной утилиты "mosquitto_sub".
- Отправить сообщение в ранее выбранный Вами топик на сервере "mqtt.by" посредством консольной утилиты "mosquitto_pub".
- Отследить его получение в "mosquitto_sub".

3. Работа с локальным MQTT-сервером (брокером) на примере Mosquitto посредством мобильного приложения:
- Установть на свой мобильный телефон любое приложение, позволяющее осуществлять взаимодействие по протоколу MQTT.
- Настроить подключение к установленному Вами ранее серверу (брокеру) посредством данного мобильного приложения.
- Добавить выбранный Вами топик локального сервера в список топиков мобильного приложения.
- Подписаться на выбранный Вами топик на локальном сервере посредством консольной утилиты "mosquitto_sub";
- Отправить сообщение в ранее выбранный Вами топик посредством мобильного приложения.
- Отследить его получение в "mosquitto_sub".
- Отправить сообщение в ранее выбранный Вами топик посредством консольной утилиты "mosquitto_pub".
- Отследить его получение в мобильном приложении.

4. Работа с общедоступным MQTT-сервером (брокером) на примере "mqtt.by" посредством мобильного приложения:
- Настроить подключение к серверу "mqtt.by" в установленном Вами ранее мобильном приложении.
- Добавить выбранный Вами топик сервера "mqtt.by" в список топиков мобильного приложения.
- Подписаться на выбранный Вами топик на сервере "mqtt.by" посредством консольной утилиты "mosquitto_sub";
- Отправить сообщение в ранее выбранный Вами топик на сервере "mqtt.by" посредством мобильного приложения.
- Отследить его получение в "mosquitto_sub".
- Отправить сообщение в ранее выбранный Вами топик на сервере "mqtt.by" посредством консольной утилиты "mosquitto_pub".
- Отследить его получение в мобильном приложении.

Ссылки по теме:
- https://mosquitto.org/
- https://clusterfly.ru/

## Задание 6

Реализовать модель регулируемого перекрестка из задания 4, используя MQTT в качестве транспортного протокола.
Выбор MQTT-брокера остается за Вами.

Ссылки по теме:
- https://mosquitto.org/
- https://clusterfly.ru/
- https://github.com/knolleary/pubsubclient/blob/master/examples/mqtt_esp8266/mqtt_esp8266.ino

## Задание 7

Разработать домашнюю метеостанцию на базе микроконтроллера ESP8266 и комбинированного датчика температуры-влажности DHT11 из задания 3, осуществляющую передачу данных по протоколу MQTT.\
Настроить мобильное приложение для отоброжения данных, получаемых с метеостанции.\
Выбор MQTT-брокера остается за Вами.

Ссылки по теме:
- https://mosquitto.org/
- https://clusterfly.ru/
- https://github.com/knolleary/pubsubclient/blob/master/examples/mqtt_esp8266/mqtt_esp8266.ino
- https://arduino-tex.ru/news/59/dht11-podklyuchenie-k-esp8266.html


## Задание 8

Разработать страиваемое программное обеспечение, позволяющее осуществлять настройку устройства.\
Режим настройки устройства должен активироватья при его загрузке посредством нажатия встроенной кнопки Node MCU v3.\
Устройство должно поддерживать индикацию работы в нормальном режиме, а также работу в режиме настройки посредством встроенного светодиода Node MCU v3.\
При первом запуске устройство должно автоматически входить в режим настройки.\
Настройку устройства предлагается осуществлять посредством создания устройством соответствующей точки доступа Wi-Fi, а также запуска соответствующего WEB-сервера.\
В рамках настройки устройства предлагается осуществить выбор сети Wi-Fi, к которой устройство должно подключаться в нормальном режиме работы, а также установить пароль для доступа к указанной сети.\
В случае невозможности подключения к указзаной сети, устройство должно автоматически входить в сервисный режим, с отображением соответствующей индикации.

Ссылки по теме:
- https://iotprojectsideas.com/esp8266-manual-wifi-configuration-with-eeprom-without-hard-code
- https://gist.github.com/dogrocker/f998dde4dbac923c47c1
- https://how2electronics.com/esp8266-manual-wifi-configuration-without-hard-code-with-eeprom
- https://www.embedded-robotics.com/esp8266-wifi
- https://www.aranacorp.com/en/configure-an-esp8266-as-a-wi-fi-access-point

## Задание 9.1

Реализовать OTA-updated посредством Arduino IDE.

Ссылки по теме:
- https://randomnerdtutorials.com/esp8266-ota-updates-with-arduino-ide-over-the-air/
- https://arduino-esp8266.readthedocs.io/en/latest/ota_updates/readme.html


## Задание 9.2

Реализовать автоматический поиск новых версий встраиваемого программного обеспечения, а также автоматический OTA-update с использованием "сервера прошивок".

Ссылки по теме:
- https://www.mischianti.org/2021/12/07/esp8266-self-ota-update-firmware-from-server-1/
- https://www.instructables.com/Set-Up-an-ESP8266-Automatic-Update-Server/
- https://www.instructables.com/Use-ESP8266-OTA-Without-Setup-Own-Server/
- https://mischianti.org/esp8266-self-ota-update-firmware-from-server-with-version-check-2/

## Задание 10

Установить облачную платформу ThingWorx на свой ПК.\
Познакомиться с Composer, выполнив создание следующих сущностей:
1. ThingShape.
2. ThingTemplate.
3. Thing.

В качестве объекта моделирования предлагается использовать комбинированный датчик температуры-влажности-давления.

Ссылка:
[ThingWorx](https://disk.yandex.ru/d/S5GOXTvlnCeOWA)
## Задание 11

В рамках данной работы предлагается создать мэшап, позволяющий взаимодействовать с комбинированным датчиком температуры-влажности-давления, а именно:
- Отслеживать значения температуры, влажности и давления в режиме реального времени. Для этой цели предлагается использовать компонент AutoRefresh. Следует учтановить комфортный период обновления параметров - от 1 до 5 секунд.
- Независимо устанавливать значения температуры, влажности и давления.

Для обеспечения внешнего доступа к ThingWorx следует создать Application Key.\
Для облегченеия выполнения операций получения и установки значений температур, влажности и давления, предлагается создать соответствующие set/get сервисы (функции) на уровне форм вещи.\
Далее следует проверить работоспособность созданных сервисов посредством cURL или Postman, контролируя результат их выполнения посредством созданого ранее мэшапа.

## Задание 12
Добавить обработку выхода параметров комбинированного датчика за диапазон допустимых значений. Обработку соответствующих параметров следует производить на уровне соответствующих форм вещи.\
Добавить возможность установки пределов диапазонов допустимых значений, а также сигнализацию о выходе значений параметров за прнделы установленных диапазонов на интерфейс пользователя.

## Задание 13
Реализовать двустороннее взаимодействие Удаленного Терминала с его цифровым двойником в облачной платформе ThingWorx.\
Разработать мэшап, осуществляющий управление состоянием Удаленного Терминала и отображение его параметров.

Ссылки:
- [RemoteTerminalSim.rar](https://drive.google.com/file/d/1yDcA4VkircuvKYn3AZrx5OWjb043Orh5/view)
- [RemoteTerminal.doc](https://drive.google.com/file/d/1a_QlT9ALZPbWKRNeQeW4ihlrT393yae6/view)